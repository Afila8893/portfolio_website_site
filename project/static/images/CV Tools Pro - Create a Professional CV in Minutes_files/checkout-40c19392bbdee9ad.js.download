(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2222],{59243:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return N}});var t=n(78090),c=n(9382),i=n.n(c),u=n(86791),o=n.n(u),s=n(68782),l=n.n(s),_=n(42415),p=n(66530),a=n.n(p),d=n(75271),h=n(54175),f=n(90982),x=n(13760),m=n(94309),v=n(78400),k=n(52676),g=(0,d.createContext)();function K(e){var r,n=e.children,t=(r=e.value,(0,d.useEffect)(function(){(0,v.o4)()||(window.Stripe?window.Stripe.setPublishableKey(r):document.querySelector("#stripe-js").onload=function(){window.Stripe.setPublishableKey(r)})},[]),{createToken:function(e){var r=e.number,n=e.month,t=e.year,c=e.cvc,i=e.name;return new Promise(function(e,u){window.Stripe.createToken({number:r.toString(),exp_month:parseInt(n,10),exp_year:parseInt(t,10),cvc:c.toString(),name:i},function(r,n){return n.error?u(n.error.message):e(n.id)})})}});return(0,k.jsx)(g.Provider,{value:t,children:n})}var w=n(88030),y=n(65721),b=n(20262),j=n(74146),P=n(27218),I=n(23023),S=n(71917),E=n(28238),R=n(62909),T=o()(function(){return Promise.all([n.e(3712),n.e(6143)]).then(n.bind(n,36143))},{ssr:!1,loading:function(){return(0,k.jsx)(w.Z,{})},loadableGenerated:{webpack:function(){return[36143]}}});function C(e){var r=(0,_.useRouter)().query,n=(0,S.Z)().width,t=(0,d.useState)(),c=t[0],i=t[1],u=(0,I.ZP)().locale,o=(0,P.Fs)(),s=(0,v.o4)(),p=(0,v.rZ)(),g=["bluepill"].includes(o.host);(0,d.useEffect)(function(){i(o.host);var e=r.id,n=r.sourceType;e&&"undefined"!==e&&(null==e?void 0:e.trim())!=""&&(localStorage.setItem("resume:success-download-id",e),localStorage.setItem("resume:success-source-type",n)),localStorage.setItem("resumedone:checkout-seen","true"),(0,R.r2K)("checkout_experiment"),(0,R.r2K)("checkout_experiment_bis"),(0,R.r2K)("subscription_view_experiment"),(0,R.r2K)("checkout_resolution_experiment"),(0,R.r2K)("checkout_header_experiment"),(0,R.r2K)("privacy_policy_experiment"),(0,R.r2K)("checkout_skip_select_plan_v2_experiment"),(0,R.r2K)("checkout_plan_v2_experiment"),(0,R.r2K)("pricing_color_v2_experiment"),(0,R.r2K)("pricing_styled_v2_experiment"),(0,R.r2K)("payment_form_v2_experiment"),(0,R.r2K)("experiment_v2_checkout_sub_title"),(0,R.r2K)("experiment_v2_checkout_spacing"),(0,R.r2K)("experiment_v2_checkout_image_style"),(0,R.r2K)("experiment_v2_checkout_head_title"),(0,R.r2K)("experiment_v2_checkout_cta"),(0,R.r2K)("experiment_v2_checkout_image_color"),(0,R.r2K)("exp_checkout_mobile"),(0,R.r2K)("exp_checkout_pricing"),(0,R.r2K)("exp_price"),(0,R.r2K)("exp_list_under_cta"),(0,R.r2K)("exp_checkout_title_h1"),(0,R.r2K)("exp_new_checkout_rtl")},[]),(0,d.useEffect)(function(){(n<980||"pt-br"===u||R.pat.includes(u)||R.GV7.includes(u)||R.ERR.includes(o.host))&&(0,R.r2K)("exp_checkout_preview"),(n<980||!R.rFH.includes(u)&&n>=980||!R.BfS.includes(u))&&(0,R.r2K)("exp_new_checkout"),(!R.QrU.includes(u)||n<980)&&(0,R.r2K)("exp_new_checkout_v2"),(!R.JtP.includes(u)||R.GV7.includes(u)||R.ERR.includes(o.host)||n<980)&&(0,R.r2K)("exp_newly_checkout_design"),(n<980||!R.GpL.includes(u))&&(0,R.r2K)("exp_checkout_rtl_design"),(n<980||!R.__O.includes(u))&&(0,R.r2K)("exp_checkout_rtl_design_v2"),(n>=980||!R.rCA.includes(u))&&(0,R.r2K)("exp_new_checkout_mobile"),(n>=980||!R.BfS.includes(u))&&(0,R.r2K)("exp_new_checkout_mobile_v2"),(f.ch.includes(p)||n>=450&&f.cN.includes(p))&&(0,R.r2K)("exp_initial_pricing"),(!R.QrU.includes(u)||n<980)&&(0,R.r2K)("exp_new_checkout_v2")},[n]);var w=function(){return a().get({}).token?(0,k.jsx)(h.AE,{query:j.V,children:function(n){var t=n.data,i=n.loading,u=n.refetch;return(0,k.jsx)(y.uv,{value:{currentUser:t?t.userInfo:null,userLoading:i,refetch:u},children:(0,k.jsx)(m.cM,{value:E.F,specialPlanId:r.specialPlanId,withLoading:!0,loadingComponent:"checkout",rules:e.pageProps,children:(0,k.jsx)(x.Uu,{children:(0,k.jsx)(T,{id:r.id,sourceType:r.sourceType,offsetHeight:r.offsetHeight,page:r.page,screenResolution:o.screenResolution,deviceInfo:o.deviceInfo,domain:c,isAutoApply:g})})})})}}):(0,k.jsx)(m.cM,{value:E.F,specialPlanId:r.specialPlanId,withLoading:!0,loadingComponent:"checkout",rules:e.pageProps,children:(0,k.jsx)(x.Uu,{children:(0,k.jsx)(T,{id:r.id,sourceType:r.sourceType,offsetHeight:r.offsetHeight,page:r.page,screenResolution:o.screenResolution,deviceInfo:o.deviceInfo,domain:c,isAutoApply:g})})})};return(0,k.jsxs)(d.Fragment,{children:[!s&&(0,k.jsx)(l(),{children:(0,k.jsx)("script",{src:"https://js.stripe.com/v2/",id:"stripe-js"})}),function(){if(s)return w();var e=(0,R.ttu)(o.host);return(0,k.jsx)(K,{value:e,children:w()})}()]})}C.displayName="Checkout",C.getInitialProps=(0,t.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{rules:[],defaultRules:[],trustPilotRules:[]});case 1:case"end":return e.stop()}},e)}));var N=(0,b.Z)(C,w.Z)},80531:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return n(59243)}])}},function(e){e.O(0,[3712,2888,179],function(){return e(e.s=80531)}),_N_E=e.O()}]);
//# sourceMappingURL=/_next/static/chunks/pages/checkout-40c19392bbdee9ad.js.map